# ultralight | metrics file
# compatible stepmania versions:
#  * StepMania 5 Beta 3 (and later) [primary platform]
#  * sm-ssc (up to v1.2.5, but don't use it anymore, please.)
[Common]
InitialScreen="ScreenTitleMenu"
FirstAttractScreen="ScreenTitleMenu"
AutoSetStyle=ThemePrefs.Get("AutoSetStyle")

# *Manager
[SongManager]
NumSongGroupColors=1
NumCourseGroupColors=1
SongGroupColor1=color("#DDDDDD")
CourseGroupColor1=color("#DDDDDD")
# only use ONCE.
ExtraColorMeter=6968

# system layer
[ScreenSystemLayer]
CreditsP1X=SCREEN_LEFT+16
CreditsP1Y=SCREEN_BOTTOM-16
CreditsP1OnCommand=NoStroke;zoom,0.625;halign,0
CreditsP2X=SCREEN_RIGHT-16
CreditsP2Y=SCREEN_BOTTOM-16
CreditsP2OnCommand=NoStroke;zoom,0.625;halign,1

###################
# overlay screens #
###################
[ScreenStatsOverlay]
StatsX=SCREEN_RIGHT-6
StatsY=SCREEN_TOP+22
StatsOnCommand=halign,1;valign,0;shadowlength,1;zoom,0.5

# ShowSkips: If you don't like seeing that box in the lower right hand corner,
# then set this metric to false:
ShowSkips=true

# swme
[ScreenWithMenuElements]
TimerX=SCREEN_LEFT+16
TimerY=SCREEN_TOP+12
TimerOnCommand=halign,0;vertalign,top;addx,-96;bounceend,0.2;addx,96;strokecolor,color("0,0,0,0")
TimerOffCommand=bouncebegin,0.2;addx,-96
ShowCoinsAndCredits=true

# options-related
[OptionsCursorP1]
LeftOnCommand=halign,1;diffuse,PlayerColor(PLAYER_1)
MiddleOnCommand=diffuse,PlayerColor(PLAYER_1)
RightOnCommand=halign,0;diffuse,PlayerColor(PLAYER_1)

LeftX=-2
MiddleX=-2
RightX=-2
LeftY=-0
MiddleY=-0
RightY=-0

[OptionsCursorP2]
LeftOnCommand=halign,1;diffuse,PlayerColor(PLAYER_2)
MiddleOnCommand=diffuse,PlayerColor(PLAYER_2)
RightOnCommand=halign,0;diffuse,PlayerColor(PLAYER_2)

LeftX=2
MiddleX=2
RightX=2
LeftY=0
MiddleY=0
RightY=0

[OptionsUnderlineP1]
LeftOnCommand=halign,1;diffuse,PlayerColor(PLAYER_1)
MiddleOnCommand=diffuse,PlayerColor(PLAYER_1)
RightOnCommand=halign,0;diffuse,PlayerColor(PLAYER_1)

LeftX=0
MiddleX=0
RightX=0
LeftY=-6
MiddleY=-6
RightY=-6

[OptionsUnderlineP2]
LeftOnCommand=halign,1;diffuse,PlayerColor(PLAYER_2)
MiddleOnCommand=diffuse,PlayerColor(PLAYER_2)
RightOnCommand=halign,0;diffuse,PlayerColor(PLAYER_2)

LeftX=0
MiddleX=0
RightX=0
LeftY=12
MiddleY=12
RightY=12

[ScreenTextEntry]
AnswerOnCommand=zoom,1;shadowlength,0

#~~~~~~~~~~~~~~~#
[ScreenTitleMenu]
PrevScreen="ScreenTitleMenu"
ScreenOnCommand=
#####
PrepareScreens="ScreenSelectStyle,ScreenSelectMode"
#####
ChoiceNames="1,4,5,J,7"
DefaultChoice="1"
#~~#
Choice1="applydefaultoptions;screen,"..Branch.GameStart()..";text,Play"
Choice4="screen,ScreenOptionsService;text,Options"
Choice5="screen,ScreenOptionsEdit;text,Editor"
ChoiceJ="screen,ScreenJukeboxMenu;text,Jukebox"
Choice7="screen,ScreenExit;text,Quit"
#####
ScrollerX=SCREEN_CENTER_X*1.25
ScrollerY=SCREEN_CENTER_Y*1.275
ScrollerOnCommand=stoptweening;fov,90;rotationx,-90;bounceend,0.25;rotationx,0;
ScrollerOffCommand=stoptweening;fov,90;rotationx,0;bounceend,0.25;rotationx,-90;zoomx,0;
# 28 with 3 items
ScrollerTransform=function(self,offset,itemIndex,numItems) self:y(24*(itemIndex-(numItems-1)/2)); end

# decorations #
ShowLogo=true
LogoX=SCREEN_CENTER_X*0.9
LogoY=SCREEN_CENTER_Y*1.25
LogoOnCommand=
LogoOffCommand=

ShowVersionInfo=true
VersionInfoX=SCREEN_CENTER_X
VersionInfoY=SCREEN_CENTER_Y*0.8
VersionInfoOnCommand=
VersionInfoOffCommand=

ShowCurrentGametype=true
CurrentGametypeX=SCREEN_WIDTH*0.1
CurrentGametypeY=SCREEN_BOTTOM-72
CurrentGametypeOnCommand=
CurrentGametypeOffCommand=

ShowNetworkStatus=true
NetworkStatusX=SCREEN_WIDTH*0.9
NetworkStatusY=SCREEN_BOTTOM-80
NetworkStatusOnCommand=
NetworkStatusOffCommand=

IdleTimeoutSeconds=-1

#~~~~~~~~~~~~~~~~~#
[ScreenProfileLoad]
NextScreen="ScreenSelectMode"
GroupedScreens="ScreenProfileLoad,ScreenSelectStyle,ScreenSelectMode"

#~~~~~~~~~~~~~~~~~~~~#
[ScreenSelectStyle]
Fallback="ScreenSelectMode"
NextScreen="ScreenProfileLoad"
#####
DoSwitchAnyways=THEME:GetMetric("Common","AutoSetStyle")

ShowScroller=true
WrapScroller=true
ShowIcon=false
PerChoiceScrollElement=false
PerChoiceIconElement=false

ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y
ScrollerOnCommand=addx,-SCREEN_WIDTH;linear,0.375;addx,SCREEN_WIDTH
ScrollerOffCommand=linear,0.375;addx,SCREEN_WIDTH
ScrollerCancelCommand=linear,0.375;addx,-SCREEN_WIDTH

ScrollerTransform=function(self,offset,itemIndex,numItems) self:y(26*(itemIndex-(numItems-1)/2)); end
ScrollerSecondsPerItem=0
ScrollerNumItemsToDraw=20
#####
ChoiceNames=GameCompatibleModes()
DefaultChoice="Single"
#~~#
ChoiceSingle="name,Single;style,single;screen,ScreenProfileLoad"
ChoiceDouble="name,Double;style,double;screen,ScreenProfileLoad"
ChoiceSolo="name,Solo;style,solo;screen,ScreenProfileLoad"
ChoiceVersus="name,Versus;style,versus;screen,ScreenProfileLoad"
ChoiceCouple="name,Couple;style,couple;screen,ScreenProfileLoad"
# pump
ChoiceHalfDouble="name,HalfDouble;style,halfdouble;screen,ScreenProfileLoad"
# beat
Choice5Keys="name,5Keys;style,single5;;screen,ScreenProfileLoad"
Choice7Keys="name,7Keys;style,single7;screen,ScreenProfileLoad"
Choice10Keys="name,10Keys;style,double10;screen,ScreenProfileLoad"
Choice14Keys="name,14Keys;style,double14;screen,ScreenProfileLoad"
# kb7
ChoiceKB7="name,kb7;style,single;screen,ScreenProfileLoad"
# todo: other modes?
# techno
## 4
## 5
## 8
## 4double
## 5double
# pop'n
## 5
## 9

# your mother
OptionOrderAuto="1:2,2:1"

#~~~~~~~~~~~~~~~~~~~~~~#
[ScreenSelectNumPlayers]
Fallback="ScreenSelectMode"
NextScreen="ScreenProfileLoad"
#####
DoSwitchAnyways=THEME:GetMetric("Common","AutoSetStyle")

DefaultChoice="1P"
ChoiceNames="1P,2P"
Choice1P="applydefaultoptions;name,1P;text,One Player;style,single;screen,ScreenProfileLoad"
Choice2P="applydefaultoptions;name,2P;text,Two Players;style,versus;screen,ScreenProfileLoad"

#~~~~~~~~~~~~~~~~~~~~~#
[ScreenSelectMode]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
# meh nobody reads the introduction/information
NextScreen=Branch.GetGameInformationScreen
PrevScreen=Branch.TitleMenu()
TimerSeconds=40
#####
ShowScroller=true
WrapScroller=true
PerChoiceScrollElement=false
# fuck it I'm just gonna hack it
ShowIcon=true
PerChoiceIconElement=false
UseIconMetrics=false

ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y
ScrollerOnCommand=addx,-SCREEN_WIDTH;linear,0.375;addx,SCREEN_WIDTH
ScrollerOffCommand=linear,0.375;addx,SCREEN_WIDTH

ScrollerTransform=function(self,offset,itemIndex,numItems) self:y(28*(itemIndex-(numItems-1)/2)); end
ScrollerSecondsPerItem=0
ScrollerNumItemsToDraw=24
#####
# should I bother with survival?
# endless crashes on loop.
#ChoiceNames="Normal,Network,Nonstop,Oni,Endless,Battle,Rave"
ChoiceNames="Normal,Network,Nonstop,Oni,Battle,Rave"
DefaultChoice="Normal"
#~~#
ChoiceNormal="name,Normal;playmode,regular;screen,ScreenSelectMusic"
ChoiceNetwork="name,Network;playmode,regular;setenv,Network,true;screen,"..Branch.NetworkConnect()
ChoiceNonstop="name,Nonstop;playmode,nonstop;screen,ScreenSelectCourse"
ChoiceOni="name,Oni;playmode,oni;screen,ScreenSelectCourse"
ChoiceBattle="name,Battle;playmode,battle;;screen,ScreenSelectMusic"
ChoiceRave="name,Rave;playmode,rave;screen,ScreenSelectMusic"
#
ChoiceEndless="name,Endless;playmode,endless;screen,ScreenSelectCourse"
#
ChoiceSurvival="name,Survival;playmode,oni;screen,ScreenSelectCourse"

#~~~~~~~~~~~~~~~~~#
[ScreenProfileLoad]
#NextScreen="ScreenSelectMode"

#~~~~~~~~~~~~~~~~~#
[ScreenSelectMusic]
NextScreen=Branch.PlayerOptions()
GroupedScreens="ScreenSelectMusic,ScreenPlayerOptions,ScreenSongOptions"

TimerSeconds=120

# we have AutoSetStyle on, dude (xxx: but some players don't.)
ShowStyleIcon=false

# banner
BannerX=SCREEN_LEFT+128+24
BannerY=SCREEN_TOP+40+32
BannerOnCommand=scaletoclipped,256,80;
BannerOffCommand=bouncebegin,0.375;addy,-192

# sort display
ShowSortDisplay=true
SortDisplayX=(SCREEN_LEFT+128+32)+120
SortDisplayY=SCREEN_TOP+20
SortDisplayOnCommand=addy,-192;bouncebegin,0.2;addy,192
SortDisplayOffCommand=bouncebegin,0.375;addy,-192

# song options
ShowSongOptions=true
SongOptionsX=(SCREEN_LEFT+32)
SongOptionsY=SCREEN_TOP+120
SongOptionsOnCommand=NoStroke;addy,-192;bouncebegin,0.2;addy,192
SongOptionsOffCommand=bouncebegin,0.375;addy,-192

# selection length (also known as "song time")
ShowSelectionLength=true
SelectionLengthX=(SCREEN_LEFT+128+32)+120
SelectionLengthY=SCREEN_TOP+120
SelectionLengthOnCommand=addy,-192;bouncebegin,0.2;addy,192
SelectionLengthOffCommand=bouncebegin,0.375;addy,-192

# stage display
ShowStageDisplay=not GAMESTATE:IsCourseMode() and not GAMESTATE:IsEventMode()
StageDisplayX=(SCREEN_LEFT+128+32)+104
StageDisplayY=SCREEN_TOP+128
StageDisplayOnCommand=halign,1;addy,-192;bouncebegin,0.2;addy,192
StageDisplayOffCommand=bouncebegin,0.375;addy,-192

# musicwheel
MusicWheelX=SCREEN_CENTER_X+80
MusicWheelY=SCREEN_CENTER_Y
MusicWheelOnCommand=addx,SCREEN_WIDTH*1.25;bouncebegin,0.2;addx,-SCREEN_WIDTH*1.25
MusicWheelOffCommand=sleep,0.25;bouncebegin,0.2;addx,SCREEN_CENTER_X*1.5

# lua-based panedisplays (because I save a half-hour's worth of agony)
PaneDisplayP1X=SCREEN_CENTER_X*0.225
PaneDisplayP1Y=SCREEN_CENTER_Y-104
PaneDisplayP1OnCommand=addx,-SCREEN_CENTER_X;bouncebegin,0.2;addx,SCREEN_CENTER_X
PaneDisplayP1OffCommand=bouncebegin,0.375;addx,-SCREEN_CENTER_X

PaneDisplayP2X=SCREEN_CENTER_X*0.5
PaneDisplayP2Y=SCREEN_CENTER_Y-104
PaneDisplayP2OnCommand=addx,-SCREEN_CENTER_X;bouncebegin,0.2;addx,SCREEN_CENTER_X
PaneDisplayP2OffCommand=bouncebegin,0.375;addx,-SCREEN_CENTER_X

# bpm display
BPMDisplayX=SCREEN_CENTER_X*0.1325
BPMDisplayY=SCREEN_CENTER_Y+16
BPMDisplayOnCommand=addx,-SCREEN_CENTER_X;bouncebegin,0.2;addx,SCREEN_CENTER_X
BPMDisplayOffCommand=bouncebegin,0.35;addx,-SCREEN_CENTER_X/2

# artist and genre display
ArtistAndGenreX=SCREEN_CENTER_X*0.225
ArtistAndGenreY=SCREEN_CENTER_Y+16
ArtistAndGenreOnCommand=
ArtistAndGenreOffCommand=

# (percent) score
PercentScoreP1X=SCREEN_CENTER_X*0.475-((SCREEN_CENTER_X*0.625)/2)+2
PercentScoreP1Y=SCREEN_CENTER_Y*1.7825
PercentScoreP1OnCommand=diffuse,color("0,0,0,1");draworder,80;zoom,0.5;halign,0;strokecolor,color("0,0,0,0")
PercentScoreP1OffCommand=bouncebegin,0.35;zoomy,0

PercentScoreP2X=SCREEN_CENTER_X*0.475+((SCREEN_CENTER_X*0.625)/2)-2
PercentScoreP2Y=SCREEN_CENTER_Y*1.7825
PercentScoreP2OnCommand=diffuse,color("0,0,0,1");draworder,80;zoom,0.5;halign,1;strokecolor,color("0,0,0,0")
PercentScoreP2OffCommand=bouncebegin,0.35;zoomy,0

# (machine) score
ScoreP1X=SCREEN_CENTER_X*0.475-((SCREEN_CENTER_X*0.625)/2)+2
ScoreP1Y=SCREEN_CENTER_Y*1.85
ScoreP1OnCommand=diffuse,color("0,0,0,1");draworder,80;zoom,0.5;halign,0;strokecolor,color("0,0,0,0")
ScoreP1OffCommand=bouncebegin,0.35;zoomy,0
ScoreP1PlayerJoinedMessageCommand=%function(self,param) if param.Player == PLAYER_1 then self:visible(true); end; end;

ScoreP2X=SCREEN_CENTER_X*0.475+((SCREEN_CENTER_X*0.625)/2)-2
ScoreP2Y=SCREEN_CENTER_Y*1.85
ScoreP2OnCommand=diffuse,color("0,0,0,1");draworder,80;zoom,0.5;halign,1;strokecolor,color("0,0,0,0")
ScoreP2OffCommand=bouncebegin,0.35;zoomy,0
ScoreP2PlayerJoinedMessageCommand=%function(self,param) if param.Player == PLAYER_2 then self:visible(true); end; end;

# grades
GradeP1X=SCREEN_CENTER_X*0.5-14
GradeP1Y=WideScale(SCREEN_CENTER_Y*1.775,SCREEN_CENTER_Y*1.85)
GradeP1OnCommand=draworder,80
GradeP1OffCommand=bouncebegin,0.35;zoomy,0

GradeP2X=SCREEN_CENTER_X*0.5-7
GradeP2Y=WideScale(SCREEN_CENTER_Y*1.775,SCREEN_CENTER_Y*1.85)
GradeP2OnCommand=draworder,80
GradeP2OffCommand=bouncebegin,0.35;zoomy,0

# course stuff
ShowCourseContentsList=GAMESTATE:IsCourseMode()
CourseContentsListX=(SCREEN_CENTER_X*0.75/2)+32
CourseContentsListY=SCREEN_CENTER_Y*1.45
CourseContentsListOnCommand=
CourseContentsListOffCommand=bouncebegin,0.375;addx,-SCREEN_CENTER_X*1.25

CDTitleX=SCREEN_LEFT+256
CDTitleY=SCREEN_CENTER_Y-188
CDTitleOnCommand=zoom,0.75;
CDTitleOffCommand=finishtweening;linear,0.2;diffusealpha,0
CDTitleFrontCommand=diffuseshift;effectcolor1,color("1,1,1,1");effectcolor2,color("1,1,1,0.125");effectperiod,5
CDTitleBackCommand=queuecommand,"Springy";bob;effectmagnitude,10,0,0;effectperiod,5;blend,'BlendMode_Add';diffusealpha,0.125;
CDTitleSpringyCommand=finishtweening;linear,2.5;zoomy,1.5;linear,2.5;zoomy,0.75;queuecommand,"Springy";

#__--==--__#
[MusicWheel]
SwitchSeconds=0.01

ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y( offsetFromCenter*32 ); \
end
NumWheelItems=25

# highlight
HighlightOnCommand=y,2
HighlightOffCommand=linear,0.275;cropleft,1;

# scrollbar
ScrollBarHeight=SCREEN_HEIGHT-96
ScrollBarOnCommand=visible,true;x,WideScale(SCREEN_CENTER_X*0.725,SCREEN_CENTER_X*0.75);
#fov,70;rotationy,-12.5

[MusicWheelItem]
NormalTextMaxWidth=280
CollapsedTextMaxWidth=292

SongNameX=-64
SongNameOnCommand=halign,0;
CourseX=-64
CourseY=-6
CourseOnCommand=halign,0;maxwidth,THEME:GetMetric("MusicWheelItem","NormalTextMaxWidth");strokecolor,color("0,0,0,0")

SectionExpandedX=-72
SectionExpandedY=-6
SectionExpandedOnCommand=zoom,0.875;maxwidth,292;halign,0;diffuseshift;effectcolor1,color("1,1,1,1");effectcolor2,color("1,1,1,0.8");strokecolor,color("0,0,0,0");shadowlength,1
SectionCollapsedX=-64
SectionCollapsedY=-6
SectionCollapsedOnCommand=zoom,0.875;maxwidth,292;halign,0;stopeffect;strokecolor,color("0,0,0,0");shadowlength,1

SectionCountX=-96
SectionCountY=-4
SectionCountOnCommand=halign,1;zoom,0.75;strokecolor,color("0,0,0,0")

WheelNotifyIconX=-112
WheelNotifyIconOnCommand=

RouletteX=-72
RouletteY=-8
RouletteOnCommand=halign,0;maxwidth,400;rainbowscroll,true;strokecolor,color("#00000077");shadowlength,0

SortX=-64
SortY=-6
SortOnCommand=halign,0;maxwidth,THEME:GetMetric("MusicWheelItem","NormalTextMaxWidth");strokecolor,color("0,0,0,0")
ModeX=-64
ModeY=-6
ModeOnCommand=halign,0;maxwidth,THEME:GetMetric("MusicWheelItem","NormalTextMaxWidth");strokecolor,color("0,0,0,0")

GradeP1X=WideScale(206,220)
GradeP1Y=-7
GradeP2X=WideScale(206,220)
GradeP2Y=7

[FadingBanner]
BannerFadeFromCachedCommand=diffusealpha,0.125;stoptweening;linear,0.01;glow,color("1,1,1,0");diffusealpha,0;
BannerFadeOffCommand=diffusealpha,0.125;stoptweening;linear,0.01;diffusealpha,0
BannerResetFadeCommand=diffusealpha,1

[BPMDisplay]
SetNoBpmCommand=stoptweening;linear,0.2;diffuse,color("1,1,1,1");diffusebottomedge,BoostColor(color("1,1,1,1"),0.875);
SetNormalCommand=stoptweening;linear,0.2;diffuse,color("1,1,1,1");diffusebottomedge,BoostColor(color("1,1,1,1"),0.875);
SetChangeCommand=stoptweening;linear,0.2;diffuse,color("#f7941d");diffusetopedge,BoostColor(color("#f7941d"),1.5);
SetRandomCommand=stoptweening;linear,0.2;diffuse,color("#00aeef");diffusetopedge,BoostColor(color("#00aeef"),1.5);
SetExtraCommand=stoptweening;linear,0.2;diffuse,color("#ed1c24");diffusebottomedge,BoostColor(color("#ed1c24"),0.5);
Cycle=true
ShowQMarksInRandomCycle=false

[ScreenSelectCourse]
Fallback="ScreenSelectMusic"

#~~~~~~~~~~~~~~~~~~~#
[ScreenPlayerOptions]
PrevScreen=Branch.BackOutOfPlayerOptions()
NextScreen=Branch.SongOptions()

ContainerOnCommand=addx,-SCREEN_WIDTH;linear,0.375;addx,SCREEN_WIDTH
ContainerOffCommand=linear,0.375;addx,SCREEN_WIDTH
ContainerCancelCommand=linear,0.375;addx,-SCREEN_WIDTH

[ScreenPlayerOptionsRestricted]
Fallback="ScreenPlayerOptions"
NextScreen="ScreenStageInformation"
LineNames="1,8,16,17"

#~~~~~~~~~~~~~~~~~#
[ScreenSongOptions]
PrevScreen="ScreenPlayerOptions"
NextScreen="ScreenStageInformation"

ContainerOnCommand=addx,-SCREEN_WIDTH;linear,0.375;addx,SCREEN_WIDTH
ContainerOffCommand=linear,0.375;addx,SCREEN_WIDTH
ContainerCancelCommand=linear,0.375;addx,-SCREEN_WIDTH

#~~~~~~~~~~~~~~~~~~~~~~#
[ScreenStageInformation]
Class="ScreenSplash"
Fallback="ScreenSplash"
NextScreen="ScreenGameplay"
PrevScreen=Branch.BackOutOfStageInformation()
PrepareScreen="ScreenGameplay"
ForceTimer=true
TimerMetricsGroup="MenuTimerNoSound"
TimerSeconds=0.01

## Gameplay
#~~~~~~~~~~~~~~#
[ScreenGameplay]
NextScreen=Branch.AfterGameplay()
PrevScreen=Branch.BackOutOfStageInformation()

ScoreKeeperClass=GetScoreKeeper

# limits
MinSecondsToStep=5.0
MinSecondsToMusic=2.0
MinSecondsToStepNextSong=2.0
MusicFadeOutSeconds=0.5
OutTransitionLength=2
CourseTransitionLength=0.5
BeginFailedDelay=1.0

# now playing
NowPlayingX=SCREEN_CENTER_X
NowPlayingY=SCREEN_TOP+8
NowPlayingOnCommand=
NowPlayingOffCommand=

# score
ScoreP1X=WideScale(SCREEN_CENTER_X*0.275,SCREEN_CENTER_X*0.28)
ScoreP1Y=SCREEN_TOP+18
ScoreP1OnCommand=diffuse,PlayerColor(PLAYER_1);zoom,0.5;
#shadowcolor,Brightness(PlayerColor(PLAYER_1),0.25);
ScoreP1OffCommand=

ScoreP2X=WideScale(SCREEN_CENTER_X*1.725,SCREEN_CENTER_X*1.72)
ScoreP2Y=SCREEN_TOP+18
ScoreP2OnCommand=diffuse,PlayerColor(PLAYER_2);zoom,0.5;
#shadowcolor,Brightness(PlayerColor(PLAYER_2),0.25);
ScoreP2OffCommand=

# stepsdisplay
StepsDisplayP1X=WideScale(SCREEN_CENTER_X*0.3425,SCREEN_CENTER_X*0.42)
StepsDisplayP1Y=SCREEN_TOP+28
StepsDisplayP1OnCommand=halign,1
StepsDisplayP1OffCommand=

StepsDisplayP2X=WideScale(SCREEN_CENTER_X*1.6575,SCREEN_CENTER_X*1.58)
StepsDisplayP2Y=SCREEN_TOP+28
StepsDisplayP2OnCommand=halign,0
StepsDisplayP2OffCommand=

LeftFrameOnCommand=visible,false
RightFrameOnCommand=visible,false
ShowStageFrame=false

StepsDisplayP1SetReverseCommand=
StepsDisplayP1SetNoReverseCommand=
StepsDisplayP2SetReverseCommand=
StepsDisplayP2SetNoReverseCommand=

# life
LifeP1X=SCREEN_CENTER_X*0.675
LifeP1Y=SCREEN_TOP+32
LifeP1OnCommand=%function(self) \
	self:GetChild("Stream"):diffuse(PlayerColor(PLAYER_1)); \
end;
LifeP1OffCommand=

LifeP2X=SCREEN_CENTER_X*1.325
LifeP2Y=SCREEN_TOP+32
LifeP2OnCommand=%function(self) \
	self:zoomx(-1); \
	self:GetChild("Stream"):diffuse(PlayerColor(PLAYER_2)); \
end;
LifeP2OffCommand=

# rave
CombinedLifeX=SCREEN_CENTER_X
CombinedLifeY=SCREEN_TOP+32
CombinedLifeOnCommand=
CombinedLifeOffCommand=

# stage
# don't show in Event mode or Course modes.
ShowStageDisplay=not GAMESTATE:IsCourseMode() and not GAMESTATE:IsEventMode()
StageDisplayX=SCREEN_CENTER_X
# Scripts/Plumbing.lua:
StageDisplayY=StageDisplayY()
StageDisplayOnCommand=
StageDisplayOffCommand=

# bpm
BPMDisplayX=SCREEN_CENTER_X
BPMDisplayY=SCREEN_BOTTOM-36
BPMDisplayOnCommand=zoomy,0;bounceend,0.25;zoomy,1;
BPMDisplayOffCommand=bouncebegin,0.25;zoomy,0;

# player options
PlayerOptionsP1X=SCREEN_LEFT+8
PlayerOptionsP1Y=SCREEN_BOTTOM-48
PlayerOptionsP1OnCommand=zoom,0.5;halign,0;shadowlength,1;strokecolor,color("#00000000")
PlayerOptionsP1OffCommand=bouncebegin,0.45;y,SCREEN_BOTTOM+16

PlayerOptionsP2X=SCREEN_RIGHT-8
PlayerOptionsP2Y=SCREEN_BOTTOM-48
PlayerOptionsP2OnCommand=zoom,0.5;halign,1;shadowlength,1;strokecolor,color("#00000000")
PlayerOptionsP2OffCommand=bouncebegin,0.45;y,SCREEN_BOTTOM+16

# song options
SongOptionsX=SCREEN_CENTER_X
SongOptionsY=SCREEN_BOTTOM-14
SongOptionsOnCommand=zoom,0.5;shadowlength,1;strokecolor,color("#00000000")
SongOptionsOffCommand=

# lyrics
LyricDisplaySetNoReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_BOTTOM-96
LyricDisplaySetReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_TOP+65
LyricDisplaySetOneReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_TOP+65
LyricDisplayDefaultColor=color("1,1,1,1");

#_-==-_#
[Player]
ReceptorArrowsYStandard=ThemePrefs.Get("ReceptorPosition") and -125 or -164
ReceptorArrowsYReverse=164

DrawDistanceBeforeTargetsPixels=SCREEN_HEIGHT
DrawDistanceAfterTargetsPixels=-(SCREEN_CENTER_Y*0.375)

[Combo]
NumberOnCommand=y,SCREEN_CENTER_Y-216-1.5;shadowlength,1;halign,1;vertalign,bottom;skewx,-0.15;
LabelOnCommand=x,6;y,16;shadowlength,1;zoom,0.75;halign,0;valign,1;skewx,-0.15;
# fff
LabelMinZoom=1
LabelMaxZoom=1
PulseCommand=%function(self,param) self:stoptweening() self:zoom(param.Zoom*1.05) self:linear(0.05) self:zoom(param.Zoom) end
PulseLabelCommand=%function(self,param) self:stoptweening(); self:zoom(1.075*param.LabelZoom); self:linear(0.05); self:zoom(param.LabelZoom); end

[Judgment]
# todo: customize
JudgmentW1Command=shadowlength,0;diffusealpha,1;zoom,1.3;linear,0.05;zoom,1;sleep,0.8;linear,0.1;zoomy,0.5;zoomx,2;diffusealpha,0;glowblink;effectperiod,0.05;effectcolor1,1,1,1,0;effectcolor2,1,1,1,0.8
JudgmentW2Command=shadowlength,0;diffusealpha,1;zoom,1.3;linear,0.05;zoom,1;sleep,0.8;linear,0.1;zoomy,0.5;zoomx,2;diffusealpha,0
JudgmentW3Command=shadowlength,0;diffusealpha,1;zoom,1.2;linear,0.05;zoom,1;sleep,0.8;linear,0.1;zoomy,0.5;zoomx,2;diffusealpha,0;
JudgmentW4Command=shadowlength,0;diffusealpha,1;zoom,1.1;linear,0.05;zoom,1;sleep,0.8;linear,0.1;zoomy,0.5;zoomx,2;diffusealpha,0;
JudgmentW5Command=shadowlength,0;diffusealpha,1;zoom,1.0;vibrate;effectmagnitude,4,8,8;sleep,0.8;linear,0.1;zoomy,0.5;zoomx,2;diffusealpha,0
JudgmentMissCommand=shadowlength,0;diffusealpha,1;zoom,1;y,-20;linear,0.8;y,20;sleep,0.8;linear,0.1;zoomy,0.5;zoomx,2;diffusealpha,0

[ScoreDisplayNormal]
TextOnCommand=halign,0.5;shadowlength,1;strokecolor,color("0,0,0,0")
#TextLoadCommand=%function(self,param) self:diffuse(PlayerColor(param.PlayerState:GetPlayerNumber())); end

[ScoreDisplayRave]
MeterP1X=
MeterP1Y=
MeterP1OnCommand=
MeterP1OffCommand=
LevelP1X=-124
LevelP1Y=-6
LevelP1OnCommand=halign,1;zoom,0.9;shadowlength,2;diffuse,PlayerColor(PLAYER_1);strokecolor,ColorMidTone(PlayerColor(PLAYER_1))
LevelP1OffCommand=

MeterP2X=
MeterP2Y=
MeterP2OnCommand=zoomx,-1
MeterP2OffCommand=
LevelP2X=124
LevelP2Y=-6
LevelP2OnCommand=halign,0;zoom,0.9;shadowlength,2;diffuse,PlayerColor(PLAYER_2);strokecolor,ColorMidTone(PlayerColor(PLAYER_2))
LevelP2OffCommand=

[CombinedLifeMeterTug]
MeterWidth=SCREEN_CENTER_X
MeterHeight=12

[LifeMeterBattery]
BatteryP1X=-24
BatteryP1Y=0
BatteryP1OnCommand=diffuse,PlayerColor(PLAYER_1);
BatteryP1OffCommand=

BatteryP2X=24
BatteryP2Y=0
BatteryP2OnCommand=diffuse,PlayerColor(PLAYER_2);
BatteryP2OffCommand=

[LifeMeterBattery Percent]
PercentUseRemainder=false
PercentP1X=-192
PercentP1Y=-4
PercentP1OnCommand=zoom,0.5;shadowlength,1;diffuse,PlayerColor(PLAYER_1);halign,0
PercentP1OffCommand=
PercentP2X=192
PercentP2Y=-4
PercentP2OnCommand=zoom,0.5;shadowlength,1;diffuse,PlayerColor(PLAYER_2);halign,0
PercentP2OffCommand=

DancePointsP1X=-192
DancePointsP1Y=-4
DancePointsP1OnCommand=zoom,0.5;shadowlength,1;diffuse,PlayerColor(PLAYER_1);halign,0
DancePointsP1OffCommand=
DancePointsP2X=192
DancePointsP2Y=-4
DancePointsP2OnCommand=zoom,0.5;shadowlength,1;diffuse,PlayerColor(PLAYER_2);halign,0
DancePointsP2OffCommand=
DancePointsDigits=5

ApplyScoreDisplayOptions=true
Format=
FormatPercentScore=FormatPercentScore

[StreamDisplay]
PillTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:setsize(196,12); \
end
TextureCoordScaleX=0
NumPills=1
# blargh on these:
UseThreePartMethod=false
AlwaysBounceNormalBar=false

[StepsDisplayGameplay]
Fallback="StepsDisplay"
# show the meter
ShowMeter=true
ZeroMeterString="?"
MeterX=0
MeterY=0
MeterOnCommand=shadowlength,0;zoom,0.5
MeterSetCommand=%function(self,param) if param.CustomDifficulty then self:diffuse(CustomDifficultyToLightColor(param.CustomDifficulty)); self:strokecolor(CustomDifficultyToDarkColor(param.CustomDifficulty)); end end
# don't show everything else
ShowTicks=false
ShowDescription=false
ShowAutogen=false
# maybe show StepsType? idk
ShowStepsType=false

[RollingNumbers]
TextFormat="%09.0f"
ApproachSeconds=0.1
Commify=false

## Evaluation
[ScreenEvaluation]
NextScreen="ScreenProfileSave"
#WideScale(SCREEN_CENTER_X*0.625,SCREEN_CENTER_X*0.78) for P1 nums close to frame
#WideScale(SCREEN_CENTER_X*1.375,SCREEN_CENTER_X*1.22) for P2 nums close to frame

# StepsDee
ShowStepsDisplay=true
#~~~~~~~~~~~~~~~#
StepsDisplayP1X=SCREEN_CENTER_X*0.75
StepsDisplayP1Y=SCREEN_CENTER_Y*0.7
StepsDisplayP1OnCommand=
StepsDisplayP1OffCommand=
#~~~~~~~~~~~~~~#
StepsDisplayP2X=SCREEN_CENTER_X*1.375
StepsDisplayP2Y=SCREEN_CENTER_Y*0.7
StepsDisplayP2OnCommand=
StepsDisplayP2OffCommand=

# stealing this for something else because I am very lazy
PercentFrameP1X=0
PercentFrameP1Y=0
PercentFrameP1OnCommand=
PercentFrameP1OffCommand=
#~~~~~~~~~~~~~~#
PercentFrameP2X=0
PercentFrameP2Y=0
PercentFrameP2OnCommand=
PercentFrameP2OffCommand=

# show all the usuals
JudgmentP1X=WideScale(SCREEN_CENTER_X*0.425,SCREEN_CENTER_X*0.45)
JudgmentP2X=WideScale(SCREEN_CENTER_X*1.575,SCREEN_CENTER_X*1.55)
# zoom was previously 0.8
JudgmentZoom=0.725

ShowJudgmentLineW1=true
W1Y=SCREEN_CENTER_Y*0.9
#~~~~~~~~~~#
W1NumberP1X=met("ScreenEvaluation","JudgmentP1X")+48
W1NumberP1Y=met("ScreenEvaluation","W1Y")
W1NumberP1OnCommand=halign,0;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W1');strokecolor,color("0,0,0,0")
W1NumberP1OffCommand=
#~~~~~~~~~~#
W1NumberP2X=met("ScreenEvaluation","JudgmentP2X")-48
W1NumberP2Y=met("ScreenEvaluation","W1Y")
W1NumberP2OnCommand=halign,1;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W1');strokecolor,color("0,0,0,0")
W1NumberP2OffCommand=

ShowJudgmentLineW2=true
W2Y=SCREEN_CENTER_Y
#~~~~~~~~~~#
W2NumberP1X=met("ScreenEvaluation","JudgmentP1X")+48
W2NumberP1Y=met("ScreenEvaluation","W2Y")
W2NumberP1OnCommand=halign,0;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W2');strokecolor,color("0,0,0,0")
W2NumberP1OffCommand=
#~~~~~~~~~~#
W2NumberP2X=met("ScreenEvaluation","JudgmentP2X")-48
W2NumberP2Y=met("ScreenEvaluation","W2Y")
W2NumberP2OnCommand=halign,1;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W2');strokecolor,color("0,0,0,0")
W2NumberP2OffCommand=

ShowJudgmentLineW3=true
W3Y=SCREEN_CENTER_Y*1.1
#~~~~~~~~~~#
W3NumberP1X=met("ScreenEvaluation","JudgmentP1X")+48
W3NumberP1Y=met("ScreenEvaluation","W3Y")
W3NumberP1OnCommand=halign,0;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W3');strokecolor,color("0,0,0,0")
W3NumberP1OffCommand=
#~~~~~~~~~~#
W3NumberP2X=met("ScreenEvaluation","JudgmentP2X")-48
W3NumberP2Y=met("ScreenEvaluation","W3Y")
W3NumberP2OnCommand=halign,1;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W3');strokecolor,color("0,0,0,0")
W3NumberP2OffCommand=

ShowJudgmentLineW4=true
W4Y=SCREEN_CENTER_Y*1.2
#~~~~~~~~~~#
W4NumberP1X=met("ScreenEvaluation","JudgmentP1X")+48
W4NumberP1Y=met("ScreenEvaluation","W4Y")
W4NumberP1OnCommand=halign,0;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W4');strokecolor,color("0,0,0,0")
W4NumberP1OffCommand=
#~~~~~~~~~~#
W4NumberP2X=met("ScreenEvaluation","JudgmentP2X")-48
W4NumberP2Y=met("ScreenEvaluation","W4Y")
W4NumberP2OnCommand=halign,1;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W4');strokecolor,color("0,0,0,0")
W4NumberP2OffCommand=

ShowJudgmentLineW5=true
W5Y=SCREEN_CENTER_Y*1.3
#~~~~~~~~~~#
W5NumberP1X=met("ScreenEvaluation","JudgmentP1X")+48
W5NumberP1Y=met("ScreenEvaluation","W5Y")
W5NumberP1OnCommand=halign,0;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W5');strokecolor,color("0,0,0,0")
W5NumberP1OffCommand=
#~~~~~~~~~~#
W5NumberP2X=met("ScreenEvaluation","JudgmentP2X")-48
W5NumberP2Y=met("ScreenEvaluation","W5Y")
W5NumberP2OnCommand=halign,1;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_W5');strokecolor,color("0,0,0,0")
W5NumberP2OffCommand=

ShowJudgmentLineMiss=true
MissY=SCREEN_CENTER_Y*1.4
#~~~~~~~~~~#
MissNumberP1X=met("ScreenEvaluation","JudgmentP1X")+48
MissNumberP1Y=met("ScreenEvaluation","MissY")
MissNumberP1OnCommand=halign,0;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_Miss');strokecolor,color("0,0,0,0")
MissNumberP1OffCommand=
#~~~~~~~~~~~#
MissNumberP2X=met("ScreenEvaluation","JudgmentP2X")-48
MissNumberP2Y=met("ScreenEvaluation","MissY")
MissNumberP2OnCommand=halign,1;zoom,met("ScreenEvaluation","JudgmentZoom");diffuse,TapNoteScoreToColor('TapNoteScore_Miss');strokecolor,color("0,0,0,0")
MissNumberP2OffCommand=

# detail area
ShowDetailArea=true
#~~~~~~~~~~~~~#
DetailFrameP1X=met("ScreenEvaluation","JudgmentP1X")
DetailFrameP1Y=SCREEN_CENTER_Y*1.75
DetailFrameP1OnCommand=draworder,1
DetailFrameP1OffCommand=
#~~~~~~~~~~~~~#
DetailFrameP2X=met("ScreenEvaluation","JudgmentP2X")
DetailFrameP2Y=SCREEN_CENTER_Y*1.75
DetailFrameP2OnCommand=draworder,1
DetailFrameP2OffCommand=

# labels are made elsewhere.
ShowSharedJudgmentLineLabels=false

# stage
#ShowStageDisplay=GAMESTATE:GetPlayMode() == 'PlayMode_Regular' or GAMESTATE:GetPlayMode() == 'PlayMode_Rave' or GAMESTATE:GetPlayMode() == 'PlayMode_Battle'
ShowStageDisplay=true
StageDisplayX=SCREEN_CENTER_X
StageDisplayY=SCREEN_TOP+8
StageDisplayOnCommand=
StageDisplayOffCommand=

# banner
LargeBannerX=SCREEN_CENTER_X
LargeBannerY=SCREEN_TOP+64
LargeBannerOnCommand=zoomto,256,80
LargeBannerOffCommand=

LargeBannerFrameOnCommand=visible,false

# GraphDisplay
ShowGraphDisplay=true
#~~~~~~~~~~~~~~#
GraphDisplayP1X=SCREEN_CENTER_X*0.3
GraphDisplayP1Y=SCREEN_TOP+64
GraphDisplayP1OnCommand=
GraphDisplayP1OffCommand=
#~~~~~~~~~~~~~~#
GraphDisplayP2X=SCREEN_CENTER_X*1.7
GraphDisplayP2Y=SCREEN_TOP+64
GraphDisplayP2OnCommand=
GraphDisplayP2OffCommand=

# ComboGraph
ShowComboGraph=true
#~~~~~~~~~~~~~~#
ComboGraphP1X=SCREEN_CENTER_X*0.3
ComboGraphP1Y=SCREEN_TOP+96
ComboGraphP1OnCommand=
ComboGraphP1OffCommand=
#~~~~~~~~~~~~~~#
ComboGraphP2X=SCREEN_CENTER_X*1.7
ComboGraphP2Y=SCREEN_TOP+96
ComboGraphP2OnCommand=
ComboGraphP2OffCommand=

# dance points
ShowPointsArea=true
#~~~~~~~~~~~~~#
PercentP1X=(SCREEN_CENTER_X*0.35)
PercentP1Y=SCREEN_TOP+114
PercentP1OnCommand=zoom,0.8
PercentP1OffCommand=

PercentP2X=(SCREEN_CENTER_X*1.75)
PercentP2Y=SCREEN_TOP+114
PercentP2OnCommand=zoom,0.8
PercentP2OffCommand=

# some people seem to like machine score; I don't know why.
ShowScoreArea=true
#~~~~~~~~~~~~~#
ScoreLabelX=
ScoreLabelY=
ScoreLabelOnCommand=visible,false

ScoreNumberP1X=(SCREEN_CENTER_X*0.35)
ScoreNumberP1Y=SCREEN_TOP+126
ScoreNumberP1OnCommand=halign,1;zoom,0.5;shadowlength,1;diffusebottomedge,PlayerColor(PLAYER_1);strokecolor,color("#00000000")
ScoreNumberP1OffCommand=

ScoreNumberP2X=(SCREEN_CENTER_X*1.75)
ScoreNumberP2Y=SCREEN_TOP+126
ScoreNumberP2OnCommand=halign,1;zoom,0.5;shadowlength,1;diffusebottomedge,PlayerColor(PLAYER_2);strokecolor,color("#00000000")
ScoreNumberP2OffCommand=

# Grades
ShowGradeArea=true
#~~~~~~~~~~~~#
GradeP1X=(SCREEN_CENTER_X*0.3)+52
GradeP1Y=SCREEN_TOP+116
GradeP1OnCommand=
GradeP1OffCommand=
#--#
GradeP2X=(SCREEN_CENTER_X*1.7)+52
GradeP2Y=SCREEN_TOP+116
GradeP2OnCommand=
GradeP2OffCommand=

GradeFrameP1X=
GradeFrameP1Y=
GradeFrameP1OnCommand=
GradeFrameP2X=
GradeFrameP2Y=
GradeFrameP2OnCommand=

# SelectionInfo = song name&artist or course name
ShowSelectionInfo=true
SelectionInfoX=SCREEN_CENTER_X
SelectionInfoY=SCREEN_TOP+112
SelectionInfoOnCommand=
SelectionInfoOffCommand=

# song options
SongOptionsX=SCREEN_CENTER_X
SongOptionsY=SCREEN_TOP+128
SongOptionsOnCommand=zoom,0.425;shadowlength,1;strokecolor,color("0,0,0,0.25")
SongOptionsOffCommand=

# player options (needs wrapwidthpixels somewhere)
PlayerOptionsP1X=SCREEN_CENTER_X*0.125
PlayerOptionsP1Y=SCREEN_TOP+152
PlayerOptionsP1OnCommand=halign,0;zoom,0.45;shadowlength,1;strokecolor,color("0,0,0,0.25")
PlayerOptionsP1OffCommand=
#--#
PlayerOptionsP2X=SCREEN_CENTER_X*1.875
PlayerOptionsP2Y=SCREEN_TOP+152
PlayerOptionsP2OnCommand=halign,1;zoom,0.45;shadowlength,1;strokecolor,color("0,0,0,0.25")
PlayerOptionsP2OffCommand=

# the dirty part of the detail area (think panedisplay in metrics)
DetailFrameRowYBegin=SCREEN_CENTER_Y*1.525
DetailFrameRowYOffset=15
#~~~~~~~~~~~~~~~#
NumStepsNumberP1X=met("ScreenEvaluation","JudgmentP1X")
NumStepsNumberP1Y=met("ScreenEvaluation","DetailFrameRowYBegin")+met("ScreenEvaluation","DetailFrameRowYOffset")
NumStepsNumberP1OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
NumStepsNumberP1OffCommand=
#--#
NumStepsNumberP2X=met("ScreenEvaluation","JudgmentP2X")
NumStepsNumberP2Y=met("ScreenEvaluation","DetailFrameRowYBegin")+met("ScreenEvaluation","DetailFrameRowYOffset")
NumStepsNumberP2OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
NumStepsNumberP2OffCommand=
#~~~~~~~~~~~~~~~~#
JumpsNumberP1X=met("ScreenEvaluation","JudgmentP1X")
JumpsNumberP1Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*2)
JumpsNumberP1OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
JumpsNumberP1OfCommand=
#--#
JumpsNumberP2X=met("ScreenEvaluation","JudgmentP2X")
JumpsNumberP2Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*2)
JumpsNumberP2OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
JumpsNumberP2OffCommand=
#~~~~~~~~~~~~~#
HoldsNumberP1X=met("ScreenEvaluation","JudgmentP1X")
HoldsNumberP1Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*3)
HoldsNumberP1OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
HoldsNumberP1OffCommand=
#--#
HoldsNumberP2X=met("ScreenEvaluation","JudgmentP2X")
HoldsNumberP2Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*3)
HoldsNumberP2OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
HoldsNumberP2OffCommand=
#~~~~~~~~~~~~~#
MinesNumberP1X=met("ScreenEvaluation","JudgmentP1X")
MinesNumberP1Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*4)
MinesNumberP1OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
MinesNumberP1OffCommand=
#--#
MinesNumberP2X=met("ScreenEvaluation","JudgmentP2X")
MinesNumberP2Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*4)
MinesNumberP2OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
MinesNumberP2OffCommand=
#~~~~~~~~~~~~~#
HandsNumberP1X=met("ScreenEvaluation","JudgmentP1X")
HandsNumberP1Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*5)
HandsNumberP1OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
HandsNumberP1OffCommand=
#--#
HandsNumberP2X=met("ScreenEvaluation","JudgmentP2X")
HandsNumberP2Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*5)
HandsNumberP2OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
HandsNumberP2OffCommand=
#~~~~~~~~~~~~~#
RollsNumberP1X=met("ScreenEvaluation","JudgmentP1X")
RollsNumberP1Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*6)
RollsNumberP1OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
RollsNumberP1OffCommand=
#--#
RollsNumberP2X=met("ScreenEvaluation","JudgmentP2X")
RollsNumberP2Y=met("ScreenEvaluation","DetailFrameRowYBegin")+(met("ScreenEvaluation","DetailFrameRowYOffset")*6)
RollsNumberP2OnCommand=zoom,0.5;halign,1;shadowlength,1;draworder,20;strokecolor,color("0,0,0,0")
RollsNumberP2OffCommand=
#~~~~~~~~~~~~~#
# unused
LiftsNumberP1X=
LiftsNumberP1Y=
LiftsNumberP1OnCommand=visible,false
LiftsNumberP1OffCommand=
#--#
LiftsNumberP2X=
LiftsNumberP2Y=
LiftsNumberP2OnCommand=visible,false
LiftsNumberP2OffCommand=
#~~~~~~~~~~~~~#
# unused
FakesNumberP1X=
FakesNumberP1Y=
FakesNumberP1OnCommand=visible,false
FakesNumberP1OffCommand=
#--#
FakesNumberP2X=
FakesNumberP2Y=
FakesNumberP2OnCommand=visible,false
FakesNumberP2OffCommand=
#~~~~~~~~~~~~~#

# things I'm not dealing with right now
ShowSurvivedArea=false
ShowBonusArea=false

# unused?
ShowWinArea=false
ShowTimeArea=false

[ScreenEvaluationNormal]
Fallback="ScreenEvaluation"
NextScreen="ScreenProfileSave"

# course mode eval stuff #

#[nonstop]
#ShowGradeArea=true
#ShowSurvivedArea=true
#ShowScoreArea=true
####
#ShowPointsArea=false
#ShowBonusArea=false
#ShowDetailArea=false
#ShowWinArea=false
#ShowTimeArea=false
#ShowStageDisplay=false (this will get taken care of above)
#ShowStageFrame=false (we don't use it anyways)

#[oni]
#ShowPointsArea=true
#ShowSurvivedArea=true
#ShowTimeArea=true
####
#ShowGradeArea=false
#ShowBonusArea=false
#ShowDetailArea=false
#ShowWinArea=false
#ShowScoreArea=false
#ShowStageDisplay=false
#ShowStageFrame=false

# endless is oni (??)

# rave lolno
#ShowGradeArea=true
#ShowWinArea=true
#ShowScoreArea=true
#ShowStageDisplay=true
#ShowStageFrame=true (this is wrong)
####
#ShowPointsArea=false
#ShowBonusArea=false
#ShowDetailArea=false
#ShowSurvivedArea=false
#ShowTimeArea=false

##############################
# redundant
ShowJudgmentLineMaxCombo=false

# unused
ShowStyleIcon=false
ShowJudgmentLineHeld=false
ShowStageFrame=false

# crap metrics
#W1LabelX=
#W1LabelY=
########
GradeFrameP1X=
GradeFrameP1Y=
GradeFrameP1OnCommand=visible,false
GradeFrameP1OffCommand=
GradeFrameP2X=
GradeFrameP2Y=
GradeFrameP2OnCommand=visible,false
GradeFrameP2OffCommand=
########
PercentFrameP1X=
PercentFrameP1Y=
PercentFrameP1OnCommand=visible,false
PercentFrameP1OffCommand=
PercentFrameP2X=
PercentFrameP2Y=
PercentFrameP2OnCommand=visible,false
PercentFrameP2OffCommand=

[GraphDisplay]
BodyWidth=160
BodyHeight=48

[ComboGraph]
BodyWidth=160

[ComboGraphP1]
Fallback="ComboGraph"
[ComboGraphP2]
Fallback="ComboGraph"

[ScreenEvaluation Percent]
ApplyScoreDisplayOptions=false
AutoRefresh=false
Format=FormatPercentScore
FormatPercentScore=
# unused?
PercentDecimalPlaces=2

DancePointsDigits=5
#~~~~~~~~~~~~~~~~#
DancePointsP1X=0
DancePointsP1Y=0
DancePointsP1OnCommand=halign,1;zoom,0.8;shadowlength,1;diffusebottomedge,Brightness(PlayerColor(PLAYER_1),0.9);strokecolor,color("#00000000")
DancePointsP1OffCommand=
#~~~~~~~~~~~~~#
DancePointsP2X=0
DancePointsP2Y=0
DancePointsP2OnCommand=halign,1;zoom,0.8;shadowlength,1;diffusebottomedge,Brightness(PlayerColor(PLAYER_2),0.9);strokecolor,color("#00000000")
DancePointsP2OffCommand=

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#

PercentP1X=0
PercentP1Y=0
PercentP1OnCommand=halign,1;zoom,0.8;shadowlength,1;diffusebottomedge,Brightness(PlayerColor(PLAYER_1),0.9);strokecolor,color("#00000000")
PercentP1OffCommand=
PercentP2X=0
PercentP2Y=0
PercentP2OnCommand=halign,1;zoom,0.8;shadowlength,1;diffusebottomedge,Brightness(PlayerColor(PLAYER_2),0.9);strokecolor,color("#00000000")
PercentP2OffCommand=

PercentUseRemainder=false
#~~~~~~~~~~~~~~~~~~#
#old
PercentRemainderP1X=2
PercentRemainderP1Y=-8
PercentRemainderP1OnCommand=halign,0;valign,0;zoom,0.5;
PercentRemainderP1OffCommand=
#~~~~~~~~~~~~~~~~~~#
PercentRemainderP2X=2
PercentRemainderP2Y=-8
PercentRemainderP2OnCommand=halign,0;valign,0;zoom,0.5;
PercentRemainderP2OffCommand=

################################################################################
# Summary Evaluation
[ScreenEvaluationSummary]
Summary=true

# things to hide on summary eval
ShowStageDisplay=false
ShowSelectionInfo=false
ShowStepsDisplay=false

# Banner stuff depends on how many stages are played.

SmallBanner1X=GetSummaryBannerPos("X",1)
SmallBanner1Y=GetSummaryBannerPos("Y",1)
SmallBanner1OnCommand=zoom,0.5
SmallBanner1OffCommand=
#~~~~~~~~~~~~~#
SmallBanner2X=GetSummaryBannerPos("X",2)
SmallBanner2Y=GetSummaryBannerPos("Y",2)
SmallBanner2OnCommand=zoom,0.5
SmallBanner2OffCommand=
#~~~~~~~~~~~~~#
SmallBanner3X=GetSummaryBannerPos("X",3)
SmallBanner3Y=GetSummaryBannerPos("Y",3)
SmallBanner3OnCommand=zoom,0.5
SmallBanner3OffCommand=
#~~~~~~~~~~~~~#
SmallBanner4X=GetSummaryBannerPos("X",4)
SmallBanner4Y=GetSummaryBannerPos("Y",4)
SmallBanner4OnCommand=zoom,0.5
SmallBanner4OffCommand=
#~~~~~~~~~~~~~#
SmallBanner5X=GetSummaryBannerPos("X",5)
SmallBanner5Y=GetSummaryBannerPos("Y",5)
SmallBanner5OnCommand=zoom,0.5
SmallBanner5OffCommand=

################################################################################
# post-eval
[ScreenProfileSave]
Fallback="ScreenWithMenuElementsBlank"
NextScreen=Branch.AfterProfileSave()
# huh?
PrevScreen="ScreenTitleMenu"

# NOT event mode (why! what are you doing!!)
[ScreenContinue]
Class="ScreenContinue"
Fallback="ScreenWithMenuElements"
NextScreen=Branch.AfterContinue()
PrevScreen=Branch.AfterContinue()

WaitForChildrenBeforeTweeningOut=true

# The timer is an important element of this screen, so it should look that way.
TimerMetricsGroup="MenuTimerContinue"
TimerX=SCREEN_CENTER_X
TimerY=SCREEN_CENTER_Y
TimerOnCommand=addy,-SCREEN_CENTER_Y;decelerate,1;y,SCREEN_CENTER_Y
TimerOffCommand=sleep,1;linear,1;zoom,0;y,SCREEN_BOTTOM;z,-25;rotationz,-45;diffusealpha,0;

TimerSeconds=10
TimerStealth=false
ForceTimer=true
ForceTimerWait=false

[MenuTimerContinue]
Fallback="MenuTimer"
Text1OnCommand=stopeffect;stoptweening

WarningStart=10
WarningBeepStart=10
HurryUpTransition=0
# still WIP
Warning10Command=
Warning9Command=accelerate,0.5;diffuse,color("1,.75,0,1");zoom,1.125
Warning8Command=decelerate,0.5;diffuse,color("1,1,1,1");zoom,1
Warning7Command=accelerate,0.5;diffuse,color("1,.75,0,1");zoom,1.25
Warning6Command=decelerate,0.5;diffuse,color("1,1,1,1");zoom,1
Warning5Command=accelerate,0.5;diffuse,color("1,.75,0,1");zoom,1.375
Warning4Command=decelerate,0.5;diffuse,color("1,1,1,1");zoom,1
Warning3Command=accelerate,0.5;diffuse,color("1,.75,0,1");zoom,1.5
Warning2Command=decelerate,0.5;diffuse,color("1,1,1,1");zoom,1
Warning1Command=
Warning0Command=

[ScreenGameOver]
TimerSeconds=8
ForceTimer=true

################################################################################
## temporary until hacked up more

[CustomDifficulty]
Names="HalfDouble"
HalfDoubleStepsType="StepsType_Pump_Halfdouble"
HalfDoubleDifficulty="Difficulty_Medium"
HalfDoubleCourseType=nil
HalfDoubleString="HalfDouble"

[StepsDisplay]
ShowFrame=false
FrameX=0
FrameY=0
FrameOnCommand=visible,false
FrameLoadCommand=%function(self,param) local bFlip = param.PlayerState and param.PlayerState:GetPlayerNumber() ~= PLAYER_1; self:zoomx(bFlip and -1 or 1); end
FrameSetCommand=%function(self,param) if param.CustomDifficulty then self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) end end

NumTicks=10
MaxTicks=14
ShowTicks=false
TicksX=0
TicksY=0
TicksOnCommand=shadowlength,0;stroke
TicksSetCommand=%function(self,param) self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) if param.Meter > 9 then self:glowshift() else self:stopeffect() end end

ShowMeter=true
ZeroMeterString="?"
MeterX=30
MeterY=0
MeterOnCommand=shadowlength,0
MeterSetCommand=%function(self,param) if param.CustomDifficulty then self:diffuse(CustomDifficultyToLightColor(param.CustomDifficulty)); self:strokecolor(CustomDifficultyToDarkColor(param.CustomDifficulty)); end end

ShowDescription=true
DescriptionX=-10
DescriptionY=0
DescriptionOnCommand=shadowlength,0;uppercase,true;
DescriptionSetCommand=%function(self,param) if param.CustomDifficulty then self:diffuse(CustomDifficultyToLightColor(param.CustomDifficulty)); self:strokecolor(CustomDifficultyToDarkColor(param.CustomDifficulty)); end end

# AutoGen does nothing
ShowAutogen=true
AutogenX=40
AutogenY=0
AutogenOnCommand=
AutogenSetCommand=

ShowStepsType=false
StepsTypeX=0
StepsTypeY=0

[StepsDisplayGameplay]
Fallback="StepsDisplay"
FrameOnCommand=visible,false

[StepsDisplayEvaluation]
Fallback="StepsDisplay"

MeterX=10
MeterOnCommand=shadowlength,0;halign,1;

DescriptionX=-20
DescriptionOnCommand=shadowlength,0;uppercase,true;zoom,0.625;halign,1;maxwidth,220

AutogenSetCommand=

[StepsDisplayList]
NumShownItems=5
ItemsSpacingY=20

CapitalizeDifficultyNames=1
CursorP1OnCommand=
CursorP1OffCommand=
CursorP1TweenOnCommand=linear,0.5;diffusealpha,1
CursorP1ChangeCommand=finishtweening;decelerate,0.15
CursorP2OnCommand=
CursorP2OffCommand=
CursorP2TweenOnCommand=linear,0.5;diffusealpha,1
CursorP2ChangeCommand=finishtweening;decelerate,0.15
RowOnCommand=
RowOffCommand=
MoveCommand=finishtweening;linear,0.3
CursorP1ShowCommand=sleep,.3;linear,.3;diffusealpha,1
CursorP2ShowCommand=sleep,.3;linear,.3;diffusealpha,1
CursorP1HideCommand=linear,.3;diffusealpha,0
CursorP2HideCommand=linear,.3;diffusealpha,0

[StepsDisplayListRow]
Fallback="StepsDisplay"
FrameX=0
FrameY=0
FrameOnCommand=

ShowTicks=true
NumTicks=20
MaxTicks=20
TicksSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)); \
	end; \
end;
TicksX=2
TicksY=0
TicksOnCommand=shadowlength,0;shadowcolor,color("#FFFFFF");

ShowMeter=1
ZeroMeterString="?"
MeterX=76
MeterY=-4
MeterOnCommand=zoom,0.5;halign,0;shadowlength,1;shadowcolor,color("#00000077");maxwidth,44;strokecolor,color("#00000000")
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)); \
	end; \
end;

ShowDescription=true
DescriptionX=-72
DescriptionY=-4
DescriptionOnCommand=halign,1;uppercase,true;shadowlength,1;shadowcolor,color("#00000077");strokecolor,color("#00000000")
# the third if/else block tries to pull some wizardry with long edit names...
# doesn't work as well as I would like.
DescriptionSetCommand=%function(self,param) \
	if self:GetText() == "" then \
		self:settext("Edit"); \
	end; \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)); \
	end \
	if string.len(self:GetText()) > 8 then \
		self:wrapwidthpixels(80); self:zoom(0.35) \
	else self:zoom(0.5); \
	end \
end;

ShowStepsType=true
StepsTypeX=114

ShowAutogen=true
AutogenX=114
AutogenY=0
AutogenOnCommand=zoom,0.5;shadowlengthx,0;shadowlengthy,2;shadowcolor,color("#00000077");

# temporary whatever
# busdriver
# you can get the signal, you can get the disk
[ScreenJukeboxMenu]
Class="ScreenOptionsMaster"
Fallback="ScreenOptions"
NextScreen="ScreenJukebox"
PrevScreen="ScreenTitleMenu"
ShowStyleIcon=false
TimerSeconds=-1
InputMode="together"
ForceAllPlayers=true
LineNames="1,2,3,4"
Line1="list,Styles"
Line2="list,Groups"
Line3="list,Difficulties"
Line4="lua,OptionsRandomJukebox()"
Line4Old="list,RandomModifiers"

RowOffCommand=
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y( SCREEN_CENTER_Y-(18*numItems) + (36*offsetFromCenter) ) end
SeparateExitRowY=SCREEN_CENTER_Y+72

OptionRowNormalMetricsGroup="OptionRowJukebox"
OptionRowExitMetricsGroup="OptionRowJukeboxExit"

ContainerOnCommand=
ContainerOffCommand=sleep,0.25;linear,0.15;addy,-SCREEN_HEIGHT

[OptionRowJukebox]
Fallback="OptionRow"

[OptionRowJukeboxExit]
Fallback="OptionRowExit"
ItemOnCommand=shadowlength,0;zoom,0.5;settext,"Start"
ItemGainFocusCommand=diffuseshift;effecttiming,0.125,0.375,0.125,0.375;effectperiod,1.5;effectcolor1,color("1,1,1,1");effectcolor2,color("0,0.625,1,1")

[ScreenJukebox]
Class="ScreenJukebox"
Fallback="ScreenGameplay"
# shit I came up with on loot:
NextScreen="ScreenJukebox"
BackScreen="ScreenJukeboxMenu"
StartScreen="ScreenTitleMenu"
LightsMode="LightsMode_Demonstration"

ShowCourseModifiersProbability=0
AllowAdvancedModifiers=true

################################################################################
# online stuff #################################################################
[ScreenServerConnect]
Fallback="ScreenNetworkOptions"
NextScreen=Branch.ServerConnectNext()
PrevScreen="ScreenSelectMode"

[ScreenReportStyle]
Fallback="ScreenSelectStyle"
NextScreen=Branch.ReportStyle()
PrevScreen="ScreenSelectMode"

ChoiceSingle="name,Single;style,single;screen,"..Branch.ReportStyle()
ChoiceDouble="name,Double;style,double;screen,"..Branch.ReportStyle()
ChoiceSolo="name,Solo;style,solo;screen,"..Branch.ReportStyle()
ChoiceVersus="name,Versus;style,versus;screen,"..Branch.ReportStyle()
ChoiceCouple="name,Couple;style,couple;screen,"..Branch.ReportStyle()
# pump
ChoiceHalfDouble="name,HalfDouble;style,halfdouble;screen,"..Branch.ReportStyle()
# beat
Choice5Keys="name,5Keys;style,single5;;screen,"..Branch.ReportStyle()
Choice7Keys="name,7Keys;style,single7;screen,"..Branch.ReportStyle()
Choice10Keys="name,10Keys;style,double10;screen,"..Branch.ReportStyle()
Choice14Keys="name,14Keys;style,double14;screen,"..Branch.ReportStyle()
# kb7
ChoiceKB7="name,kb7;style,single;screen,"..Branch.ReportStyle()

[ScreenNetSelectBase]
ChatInputBoxX=SCREEN_CENTER_X*0.5
ChatInputBoxY=SCREEN_CENTER_Y*1.4825
ChatInputBoxOnCommand=
ChatInputBoxOffCommand=
#ChatInputBoxWidth=SCREEN_CENTER_X*0.9
#ChatInputBoxHeight=64
#--#
ChatInputX=((SCREEN_CENTER_X*0.5)*0.125)+4
ChatInputY=SCREEN_CENTER_Y+90
ChatTextInputWidth=(SCREEN_CENTER_X*0.9)*1.925
ChatInputOnCommand=halign,0;valign,0;zoom,0.5;diffusealpha,0;linear,0.55;diffusealpha,1;shadowlength,0;
ChatInputOffCommand=diffusealpha,1;linear,0.5;diffusealpha,0

ChatOutputBoxX=SCREEN_CENTER_X*0.5
ChatOutputBoxY=SCREEN_CENTER_Y*1.3
ChatOutputBoxOnCommand=valign,1
ChatOutputBoxOffCommand=
#ChatOutputBoxWidth=SCREEN_CENTER_X*0.9
#ChatOutputBoxHeight=SCREEN_CENTER_Y*0.875
#--#
ChatOutputX=(SCREEN_CENTER_X*0.5)*0.125
ChatOutputY=(SCREEN_CENTER_Y*1.25)
ChatTextOutputWidth=(SCREEN_CENTER_X*0.9)*1.925
ChatOutputLines=14
ChatOutputOnCommand=halign,0;valign,1;zoom,0.5;diffusealpha,0;linear,0.55;diffusealpha,1;shadowlength,0;
ChatOutputOffCommand=diffusealpha,1;linear,0.5;diffusealpha,0

[RoomWheel]
CreateRoomColor=color("0,0.75,1,1")

HighlightOnCommand=x,48
HighlightOffCommand=linear,0.275;cropleft,1;

[RoomWheelItem]
DescX=-100
DescY=6
DescWidth=SCREEN_WIDTH*1.6
DescOnCommand=zoom,0.4;strokecolor,color("#000000FF")

# disable this for now because it is hard to make look good.
[RoomInfoDisplay]
RoomInfoDisplayOnCommand=visible,false
RoomInfoDisplayOffCommand=

[ScreenNetRoom]
# let's all go to the lobby
RoomWheelX=SCREEN_CENTER_X+120
RoomWheelY=SCREEN_CENTER_Y
RoomWheelOnCommand=addx,SCREEN_WIDTH*1.25;bouncebegin,0.2;addx,-SCREEN_WIDTH*1.25
RoomWheelOffCommand=sleep,0.25;bouncebegin,0.2;addx,SCREEN_CENTER_X*1.5

[ScreenNetSelectMusic]
# the hackery
PlayerOptionsScreen="ScreenNetPlayerOptions"

MusicWheelType="OnlineMusicWheel"
MusicWheelX=SCREEN_CENTER_X+120
MusicWheelY=SCREEN_CENTER_Y
MusicWheelOnCommand=addx,SCREEN_WIDTH*1.25;bouncebegin,0.2;addx,-SCREEN_WIDTH*1.25
MusicWheelOffCommand=sleep,0.25;bouncebegin,0.2;addx,SCREEN_CENTER_X*1.5

# these metrics are going to DIE in the next SM5 release.
# GOOD.
BPMDisplayX=
BPMDisplayY=
BPMDisplayOnCommand=x,SCREEN_CENTER_X-156;y,SCREEN_CENTER_Y+172
BPMDisplayOffCommand=

# these suck
ModIconsP1OnCommand=visible,false
ModIconsP2OnCommand=visible,false

[OnlineMusicWheel]
Fallback="MusicWheel"

[ScreenNetPlayerOptions]
Fallback="ScreenPlayerOptions"

ContainerOnCommand=addx,-SCREEN_WIDTH;linear,0.075;addx,SCREEN_WIDTH
ContainerOffCommand=linear,0.075;addx,SCREEN_WIDTH
ContainerCancelCommand=linear,0.075;addx,-SCREEN_WIDTH

[ScreenNetEvaluation]
# do something about that big 'ol quad:
UsersBGOnCommand=visible,false
UsersBGOffCommand=

UsersBG1X=SCREEN_CENTER_X*0.35
UsersBG1Y=SCREEN_CENTER_Y*0.975
UsersBG1OnCommand=visible,false
UsersBG1OffCommand=
UsersBG2X=SCREEN_CENTER_X
UsersBG2Y=SCREEN_CENTER_Y*0.975
UsersBG2OnCommand=visible,false
UsersBG2OffCommand=

UserDX=0
UserDY=24
UserOnCommand=zoom,0.625
UserOffCommand=

# these need to be renamed for consistency
UserSelCommand=finishtweening;linear,0.1;zoom,0.625
UserDeSelCommand=finishtweening;linear,0.1;zoom,0.425

#====#
# player 1 side
User1X=SCREEN_CENTER_X
User1Y=SCREEN_CENTER_Y-80
User1OnCommand=
User1OffCommand=
#====#
# player 2 side
User2X=SCREEN_CENTER_X
User2Y=SCREEN_CENTER_Y-80
User2OnCommand=
User2OffCommand=

################################################################################
# StepMania 4 compatibility and overrides section ##############################
[Common]
StepsTypesToHide="dance-couple,lights-cabinet"

[BitmapText]
NumRainbowColors=7
RainbowColor1=HSV(0,1,1)
RainbowColor2=HSV(45,1,1)
RainbowColor3=HSV(90,1,1)
RainbowColor4=HSV(135,1,1)
RainbowColor5=HSV(180,1,1)
RainbowColor6=HSV(225,1,1)
RainbowColor7=HSV(270,1,1)

[MenuTimer]
FrameOnCommand=visible,false
WarningStart=0
WarningBeepStart=0

# defined in sm-ssc/_fallback
[MenuTimerNoSound]
Fallback="MenuTimer"
WarningBeepStart=0

[ScreenWithMenuElements]
ShowHeader=false
LeftFrameOnCommand=visible,false
RightFrameOnCommand=visible,false
TimerOnCommand=hide_if,not PREFSMAN:GetPreference("MenuTimer")

[ScreenSelectMaster]
HelpText=
WrapScroller=false
LoopScroller=false
# not needed in alpha 6, but needed in a5
UseTwoLists=false
OptionOrderBUp=
OptionOrderBDown=
OptionOrderBLeft=
OptionOrderBRight=
OptionOrderBAuto=

[TextBanner]
TitleOnCommand=strokecolor,color("0,0,0,0");shadowlength,0
SubtitleOnCommand=strokecolor,color("0,0,0,0");shadowlength,0
ArtistOnCommand=visible,false
ArtistPrependString=""
AfterSetCommand=%TextBannerSetFunc

[CourseDisplayTextBanner]
Fallback="TextBanner"
ArtistOnCommand=strokecolor,color("0,0,0,0");shadowlength,0
AfterSetCommand=%CourseDisplayTextBanner

# aaaaaaaaaaa this won't work out so well probably
[ScreenStage]
Fallback="ScreenStageInformation"
TimerSeconds=0.01

[ScreenProfileSave]
#ShowStyle=false

[ScreenTextEntry]
AnswerX=SCREEN_CENTER_X
AnswerY=SCREEN_CENTER_Y+20
AnswerOnCommand=shadowlength,0
AnswerOffCommand=

# options and everything related to it
[OptionRow]
ShowModIcons=false
ShowUnderlines=true
ShowBpmInSpeedTitle=false
ModIconP1X=SCREEN_CENTER_X-280
ModIconP2X=SCREEN_CENTER_X+280
ModIconOnCommand=x,-30
FrameX=SCREEN_CENTER_X-222
FrameY=0
FrameOnCommand=
TitleX=SCREEN_CENTER_X-222
TitleY=0
TitleOnCommand=shadowlength,0;uppercase,true;wrapwidthpixels,SCREEN_WIDTH*0.2;zoom,0.6
TitleGainFocusCommand=diffuse,color("1,1,1,1");strokecolor,color("0,0,0,1")
TitleLoseFocusCommand=diffuse,color("0.5,0.5,0.5,1");strokecolor,color("0,0,0,1")
ItemsStartX=SCREEN_CENTER_X-140
ItemsEndX=SCREEN_CENTER_X+280
ItemsGapX=14
ItemsMinBaseZoom=0.65
ItemsLongRowP1X=SCREEN_CENTER_X-60
ItemsLongRowP2X=SCREEN_CENTER_X+100
ItemsLongRowSharedX=SCREEN_CENTER_X
ItemOnCommand=shadowlength,0;zoom,0.5;strokecolor,color("0,0,0,0")
ItemGainFocusCommand=
ItemLoseFocusCommand=
TweenSeconds=0.2
ModIconMetricsGroup="ModIcon"
ColorSelected=color("1,1,1,1")
ColorNotSelected=color("0.9,0.9,0.9,1")
ColorDisabled=color("0.5,0.5,0.5,1")

[OptionRowService]
Fallback="OptionRow"
# Service Titles are all that are shown.
ShowUnderlines=false
ShowCursors=false
#
TitleX=SCREEN_CENTER_X
TitleY=
TitleOnCommand=shadowlength,0;uppercase,true;maxwidth,600;zoom,0.75
TitleGainFocusCommand=diffuse,color("1,1,1,1");strokecolor,color("0,0,0,1")
TitleLoseFocusCommand=diffuse,color("0.5,0.5,0.5,1");strokecolor,color("0,0,0,1")

[OptionRowSimple]
Fallback="OptionRowService"

[OptionRowExit]
Fallback="OptionRow"
FrameOnCommand=visible,false
TitleOnCommand=visible,false
TweenSeconds=0
ItemGainFocusCommand=diffuseshift;effecttiming,0.125,0.375,0.125,0.375;effectperiod,1.5;effectcolor1,color("1,1,1,1");effectcolor2,color("1,0,0,1")
ItemLoseFocusCommand=stopeffect;
ColorSelected=color("1,0,0,1")
ColorNotSelected=color("0.5,0.5,0.5,1")

[ScreenOptions]
ExplanationP1X=SCREEN_CENTER_X-240
ExplanationP1Y=SCREEN_CENTER_Y+174
ExplanationP1OnCommand=shadowlength,0;wrapwidthpixels,500;zoom,0.5;horizalign,left;cropright,1;linear,0.5;cropright,0;strokecolor,color("0,0,0,0")
ExplanationP1OffCommand=
ExplanationP2X=SCREEN_CENTER_X+240
ExplanationP2Y=SCREEN_CENTER_Y+174
ExplanationP2OnCommand=shadowlength,0;wrapwidthpixels,500;zoom,0.5;horizalign,right;cropright,1;linear,0.5;cropright,0;strokecolor,color("0,0,0,0")
ExplanationP2OffCommand=
ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+184
ExplanationTogetherOnCommand=shadowlength,0;zoom,0.75;wrapwidthpixels,600;cropright,1;linear,0.5;cropright,0;strokecolor,color("0,0,0,0")
ExplanationTogetherOffCommand=

[ScreenOptionsMaster]
# the legacy speed row in _fallback is REALLY BAD.
# now that I understand how ArbitrarySpeedMods works, this is only here for older
# StepMania 5 versions that don't use it.
Speed="11;"
SpeedDefault="mod,1x,no randomspeed"
Speed,1="mod,0.5x;name,x0.50"
Speed,2="mod,1x;name,x1"
Speed,3="mod,1.5x;name,x1.5"
Speed,4="mod,2x;name,x2"
Speed,5="mod,2.5x;name,x2.5"
Speed,6="mod,3x;name,x3"
Speed,7="mod,3.5x;name,x3.5"
Speed,8="mod,4x;name,x4"
Speed,9="mod,5x;name,x5"
Speed,10="mod,C250;name,C250"
Speed,11="mod,C500;name,C500"

[ScreenOptionsSimpleService]
Fallback="ScreenOptionsSimple"

OptionRowNormalMetricsGroup="OptionRowService"

LineHighlightOnCommand=visible,false
LineHighlightChangeCommand=
LineHighlightChangeToExitCommand=

CursorOnCommand=visible,false

[ScreenOptionsService]
Class="ScreenOptionsMaster"
Fallback="ScreenOptionsSimpleService"

LineNames="Sync,GameType,KeyConfig,TestInput,Input,Reload,Arcade,Appearance,Theme,GraphicSound,Profiles,Network,UI,Advanced,Credits"
LineTheme="gamecommand;screen,ScreenOptionsTheme;name,Theme Options"

RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y( (SCREEN_CENTER_Y-(14*numItems)) + (28*offsetFromCenter) ) \
end

ContainerOnCommand=addx,-SCREEN_WIDTH;linear,0.2;addx,SCREEN_WIDTH
ContainerOffCommand=linear,0.2;addx,SCREEN_WIDTH

[ScreenOptionsServiceChild]
Fallback="ScreenOptionsMaster"

OptionRowNormalMetricsGroup="OptionRowServiceChild"
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y( (SCREEN_CENTER_Y-(15.75*numItems)) + (32*offsetFromCenter) ) \
end

SeparateExitRowY=SCREEN_CENTER_Y+136

ContainerOnCommand=addx,-SCREEN_WIDTH;linear,0.2;addx,SCREEN_WIDTH
ContainerOffCommand=linear,0.2;addx,SCREEN_WIDTH

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+184
ExplanationTogetherOnCommand=shadowlength,0;zoom,0.625;wrapwidthpixels,(SCREEN_WIDTH)*1.375;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

[OptionRowServiceChild]
Fallback="OptionRow"

TitleX=SCREEN_CENTER_X-160
TitleOnCommand=wrapwidthpixels,SCREEN_WIDTH*0.375;halign,1;shadowlength,0;uppercase,true;zoom,0.6

[ScreenMapControllers]
MappedToOnCommand=diffuse,color("#808080");shadowlength,0;maxwidth,150;zoom,0.65

PrimaryOnCommand=x,SCREEN_CENTER_X;y,-6;zoom,0.7;shadowlength,1;ztest,true
SecondaryOnCommand=x,SCREEN_CENTER_X;y,6;zoom,0.5;shadowlength,1;ztest,true
#~~--~~#
[ScreenSelectGame]
SeparateExitRowY=SCREEN_CENTER_Y+32
#~~--~~#
[ScreenNetworkOptions]
SeparateExitRowY=SCREEN_CENTER_Y+64
#~~--~~#
[ScreenAppearanceOptions]
SeparateExitRowY=SCREEN_CENTER_Y+148
#~~--~~#
[ScreenOptionsUI]
SeparateExitRowY=SCREEN_CENTER_Y+148
#~~--~~#
[ScreenOptionsInput]
SeparateExitRowY=SCREEN_CENTER_Y+88
#~~--~~#
[ScreenOptionsGraphicsSound]
SeparateExitRowY=SCREEN_CENTER_Y+148
#~~--~~#
[ScreenOptionsArcade]
SeparateExitRowY=SCREEN_CENTER_Y+106
#~~--~~#
[ScreenOptionsManageProfiles]
ContainerOnCommand=addx,-SCREEN_WIDTH;linear,0.2;addx,SCREEN_WIDTH
ContainerOffCommand=linear,0.2;addx,SCREEN_WIDTH
#~~--~~#
[ScreenOptionsAdvanced]
SeparateExitRowY=SCREEN_CENTER_Y+148
#~~--~~#
[ScreenOptionsTheme]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"

SeparateExitRowY=SCREEN_CENTER_Y+64

LineNames="gAuto,gComboUnderField,gReceptorPosition"
#,GameplayFooter
# used
LinegAuto="lua,ThemePrefRow('AutoSetStyle')"
LinegComboUnderField="lua,ThemePrefRow('ComboUnderField')"
LinegReceptorPosition="lua,ThemePrefRow('ReceptorPosition')"
# needs to be implemented at some point:
LineGameplayFooter="lua,ThemePrefRow('GameplayFooter')"

# unused (not sure if I'm going to use these)
LinegNotePos="lua,UserPrefNotePosition()"
LinegScore="lua,UserPrefGameplayShowScore()"
LinegSDisp="lua,UserPrefGameplayShowStepsDisplay()"
LineFlashyCombo="lua,UserPrefFlashyCombo()"

# edit
[ScreenEditMenu]
ExplanationX=SCREEN_CENTER_X
ExplanationY=SCREEN_BOTTOM-56
ExplanationOnCommand=wrapwidthpixels,SCREEN_WIDTH*0.9375/0.675;shadowlength,1;zoom,0.675

[EditMenu]
Arrows1X=SCREEN_CENTER_X-176
Arrows2X=SCREEN_CENTER_X+270
ArrowsEnabledCommand=diffuse,color("1,1,1,1");shadowlengthy,1;shadowcolor,color("#002740");
ArrowsDisabledCommand=diffuse,color("0.45,0.45,0.45,1");shadowlengthy,1;shadowcolor,color("#002740");

Row1Y=SCREEN_CENTER_Y-136
Label1X=SCREEN_CENTER_X-250
Label1Y=THEME:GetMetric("EditMenu","Row1Y")
Label1OnCommand=shadowlength,1;zoom,0.75
Label1OffCommand=
Value1X=SCREEN_CENTER_X-24
Value1Y=THEME:GetMetric("EditMenu","Row1Y")
Value1OnCommand=shadowlength,1;zoom,0.75;maxwidth,SCREEN_CENTER_X*0.65
Value1OffCommand=
GroupBannerX=SCREEN_CENTER_X+170
GroupBannerY=THEME:GetMetric("EditMenu","Row1Y")
GroupBannerOnCommand=scaletoclipped,128,40

Row2Y=SCREEN_CENTER_Y-80
Label2X=SCREEN_CENTER_X-250
Label2Y=THEME:GetMetric("EditMenu","Row2Y")
Label2OnCommand=shadowlength,1;zoom,0.75
Label2OffCommand=
Value2X=SCREEN_CENTER_X+60
Value2Y=THEME:GetMetric("EditMenu","Row2Y")
Value2OnCommand=shadowlength,1;zoom,0.75;maxwidth,SCREEN_CENTER_X*0.65
Value2OffCommand=
SongBannerX=SCREEN_CENTER_X+170
SongBannerY=THEME:GetMetric("EditMenu","Row2Y")
SongBannerOnCommand=scaletoclipped,128,40
TextBannerType="TextBannerEditMode"
SongTextBannerX=SCREEN_CENTER_X-136
SongTextBannerY=THEME:GetMetric("EditMenu","Row2Y")

Row3Y=SCREEN_CENTER_Y-40

Row4Y=SCREEN_CENTER_Y-8
StepsDisplayX=SCREEN_CENTER_X+150
StepsDisplayY=THEME:GetMetric("EditMenu","Row4Y")

Row5Y=SCREEN_CENTER_Y+48

Row6Y=SCREEN_CENTER_Y+94
StepsDisplaySourceX=SCREEN_CENTER_X+150
StepsDisplaySourceY=THEME:GetMetric("EditMenu","Row6Y")

Row7Y=SCREEN_CENTER_Y+140

[ScreenOptionsEdit]
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y( (SCREEN_CENTER_Y-(14*numItems)) + (28*offsetFromCenter) ) \
end

ContainerOnCommand=addx,-SCREEN_WIDTH;linear,0.2;addx,SCREEN_WIDTH
ContainerOffCommand=linear,0.2;addx,SCREEN_WIDTH

# practice

# export package
[ScreenOptionsExportPackage]
OptionRowNormalMetricsGroup="OptionRowPackage"
OptionRowExitMetricsGroup="OptionRowPackageExit"

[OptionRowPackage]
Fallback="OptionRowService"
TitleOnCommand=shadowlength,0;uppercase,true;maxwidth,(SCREEN_WIDTH*0.95)*1.35;zoom,0.65
TitleOffCommand=sleep,0.25;linear,0.2;addy,-SCREEN_HEIGHT

[OptionRowPackageExit]
Fallback="OptionRowExit"
ItemOffCommand=sleep,0.25;linear,0.2;addy,-SCREEN_HEIGHT
